# ðŸƒ ContentMint Backend

![Node.js](https://img.shields.io/badge/Node.js-v20+-68a063?style=flat-square\&logo=node.js)
![TypeScript](https://img.shields.io/badge/TypeScript-5.9-3178c6?style=flat-square\&logo=typescript)
![Prisma](https://img.shields.io/badge/Prisma-7.2-2d3748?style=flat-square\&logo=prisma)
![License](https://img.shields.io/badge/License-MIT-yellow.svg?style=flat-square)

Backend for web scraping, data normalization, and dynamic HTML mockup generation. Built with a strong focus on type safety, observability, and scalable architecture.

## ðŸ›  Tech Stack & Core Dependencies

* **Runtime:** Node.js (ESM)
* **Language:** TypeScript 5.9.3 (Strict Mode)
* **Framework:** Express 5.2.1
* **ORM:** Prisma 7.2.0 (PostgreSQL)
* **Validation:** [Zod](https://zod.dev/) (schema-driven data integrity)
* **Security:** JWT & Bcrypt (stateless authentication), Helmet, Express Rate Limit
* **Automation:** node-cron (scheduled scraping pipelines)
* **Observability:** Winston (structured logging with daily rotation)

---

## ðŸ— System Architecture

The service implements a decoupled architecture designed for reliable data extraction and processing:

1. **Ingestion Layer:** Scraping logic orchestrated via `node-cron` or REST triggers.
2. **Validation Layer:** Strict payload sanitization using `Zod` before persistence.
3. **HTML Generation Layer:** Dynamic engine that transforms normalized data into visual HTML mockups.
4. **Persistence Layer:** Type-safe relational mapping with `Prisma`.

### ðŸ“‚ Project Structure

```text
â”œâ”€â”€ prisma/                # Database schema & migrations
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/               # External interface layer
â”‚   â”‚   â”œâ”€â”€ controllers/   # Route handlers (Auth, User)
â”‚   â”‚   â”œâ”€â”€ dtos/          # Data Transfer Objects & schemas
â”‚   â”‚   â”œâ”€â”€ middlewares/   # Express middlewares
â”‚   â”‚   â””â”€â”€ routes/        # API route definitions
â”‚   â”œâ”€â”€ core/              # Pure business logic
â”‚   â”‚   â””â”€â”€ auth/          # Auth services (Login, Register, etc.)
â”‚   â”œâ”€â”€ infrastructure/    # Technical implementations
â”‚   â”‚   â”œâ”€â”€ config/        # App configuration
â”‚   â”‚   â”œâ”€â”€ jobs/          # Cron jobs & automation
â”‚   â”‚   â””â”€â”€ lib/           # Third-party library wrappers
â”‚   â”œâ”€â”€ shared/            # Cross-cutting concerns
â”‚   â”‚   â”œâ”€â”€ utils/         # Helpers (JWT, Mailer, Logger)
â”‚   â”‚   â””â”€â”€ validators/    # Common Zod validators
â”‚   â”œâ”€â”€ app.ts             # Express application setup
â”‚   â””â”€â”€ server.ts          # Server entry point
â”œâ”€â”€ tests/                 # Global testing suite
â”‚   â”œâ”€â”€ helpers/           # Test utilities
â”‚   â””â”€â”€ integration/       # E2E & integration tests
â””â”€â”€ logs/                  # Automated audit trails
```

---

## ðŸš€ Development Workflows

### 1. Prerequisites

* Docker & Docker Compose
* Node.js v20+
* pnpm v10.28.0

### 2. Initial Setup

```bash
# Prepare environment variables
cp .env.example .env

# Provision infrastructure (PostgreSQL)
docker-compose up -d

# Install dependencies and sync database schema
pnpm install
pnpm db:migrate
```

### 3. Execution Scripts

| Command          | Description                                   |
| ---------------- | --------------------------------------------- |
| `pnpm dev`       | Start development server with tsx watch mode  |
| `pnpm build`     | Compile TypeScript and generate Prisma client |
| `pnpm start`     | Run the compiled production build             |
| `pnpm db:studio` | Open Prisma Studio GUI to inspect data        |

---

## ðŸ§ª Testing Strategy (Vitest)

Quality assurance is enforced through a multi-tier testing strategy:

* **Unit Tests:** Isolated business logic and data transformation tests.

  ```bash
  pnpm test:unit
  ```

* **Integration Tests:** End-to-end API flows and database interaction tests.

  ```bash
  pnpm test:integration
  ```

* **Coverage:** Detailed V8 code coverage reports.

  ```bash
  pnpm test:coverage
  ```

---

## ðŸ“– API Documentation

The OpenAPI/Swagger specification is automatically generated and available at:

```
GET /api-docs
```

> **Important**
> Data consistency is enforced at the application level using Zod schemas before reaching the persistence layer.
> Monitor the `/logs` directory for audit trails generated by scheduled cron jobs.
